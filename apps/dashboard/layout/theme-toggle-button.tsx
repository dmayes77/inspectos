"use client";

import { useTheme } from "next-themes";
import { useEffect, useState } from "react";

export function ThemeToggleButton() {
  const { theme, setTheme } = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => setMounted(true), []);

  if (!mounted) {
    return (
      <div className="flex h-11 w-11 items-center justify-center rounded-full border border-border lg:h-9 lg:w-9" />
    );
  }

  return (
    <button
      type="button"
      onClick={() => setTheme(theme === "dark" ? "light" : "dark")}
      className="relative flex h-11 w-11 items-center justify-center rounded-full border border-border bg-background text-muted-foreground transition-colors hover:bg-muted hover:text-foreground dark:border-border dark:bg-background dark:hover:bg-muted lg:h-9 lg:w-9"
      aria-label="Toggle theme"
    >
      {/* Sun — shown in dark mode */}
      <svg
        className="hidden dark:block"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M9.99998 1.5415C10.4142 1.5415 10.75 1.87729 10.75 2.2915V3.33317C10.75 3.74738 10.4142 4.08317 9.99998 4.08317C9.58577 4.08317 9.24998 3.74738 9.24998 3.33317V2.2915C9.24998 1.87729 9.58577 1.5415 9.99998 1.5415ZM4.81804 4.81793C5.11093 4.52504 5.58581 4.52504 5.8787 4.81793L6.6109 5.55013C6.90379 5.84302 6.90379 6.3179 6.6109 6.61079C6.31801 6.90368 5.84313 6.90368 5.55024 6.61079L4.81804 5.87859C4.52515 5.5857 4.52515 5.11082 4.81804 4.81793ZM15.182 4.81793C15.4749 5.11082 15.4749 5.5857 15.182 5.87859L14.4498 6.61079C14.1569 6.90368 13.682 6.90368 13.3891 6.61079C13.0962 6.3179 13.0962 5.84302 13.3891 5.55013L14.1213 4.81793C14.4142 4.52504 14.8891 4.52504 15.182 4.81793ZM9.99998 6.4165C8.06698 6.4165 6.49998 7.9835 6.49998 9.9165C6.49998 11.8495 8.06698 13.4165 9.99998 13.4165C11.933 13.4165 13.5 11.8495 13.5 9.9165C13.5 7.9835 11.933 6.4165 9.99998 6.4165ZM1.5415 9.99984C1.5415 9.58563 1.87729 9.24984 2.2915 9.24984H3.33317C3.74738 9.24984 4.08317 9.58563 4.08317 9.99984C4.08317 10.4141 3.74738 10.7498 3.33317 10.7498H2.2915C1.87729 10.7498 1.5415 10.4141 1.5415 9.99984ZM15.9165 9.99984C15.9165 9.58563 16.2523 9.24984 16.6665 9.24984H17.7082C18.1224 9.24984 18.4582 9.58563 18.4582 9.99984C18.4582 10.4141 18.1224 10.7498 17.7082 10.7498H16.6665C16.2523 10.7498 15.9165 10.4141 15.9165 9.99984ZM6.6109 13.3891C6.90379 13.682 6.90379 14.1569 6.6109 14.4498L5.8787 15.182C5.58581 15.4749 5.11093 15.4749 4.81804 15.182C4.52515 14.8891 4.52515 14.4142 4.81804 14.1213L5.55024 13.3891C5.84313 13.0962 6.31801 13.0962 6.6109 13.3891ZM13.3891 13.3891C13.682 13.0962 14.1569 13.0962 14.4498 13.3891L15.182 14.1213C15.4749 14.4142 15.4749 14.8891 15.182 15.182C14.8891 15.4749 14.4142 15.4749 14.1213 15.182L13.3891 14.4498C13.0962 14.1569 13.0962 13.682 13.3891 13.3891ZM9.99998 15.9165C10.4142 15.9165 10.75 16.2523 10.75 16.6665V17.7082C10.75 18.1224 10.4142 18.4582 9.99998 18.4582C9.58577 18.4582 9.24998 18.1224 9.24998 17.7082V16.6665C9.24998 16.2523 9.58577 15.9165 9.99998 15.9165Z"
          fill="currentColor"
        />
      </svg>
      {/* Moon — shown in light mode */}
      <svg
        className="dark:hidden"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M17.4547 11.97C17.2674 11.9205 17.0687 11.9688 16.9262 12.0993C16.2321 12.7415 15.3145 13.1292 14.3069 13.1292C12.1667 13.1292 10.4318 11.3943 10.4318 9.25411C10.4318 7.96128 11.0838 6.82484 12.0723 6.12822C12.2307 6.01614 12.3216 5.83124 12.3099 5.63825C12.2982 5.44526 12.1861 5.27198 12.0148 5.17992C11.1671 4.72862 10.2105 4.4917 9.20088 4.4917C5.99997 4.4917 3.40836 7.08331 3.40836 10.2842C3.40836 13.4851 5.99997 16.0767 9.20088 16.0767C11.4568 16.0767 13.4275 14.8157 14.4495 12.9534C14.5736 12.7318 14.5481 12.457 14.3848 12.2626C14.2215 12.0682 13.9536 11.9917 13.7144 12.068"
          fill="currentColor"
        />
      </svg>
    </button>
  );
}
